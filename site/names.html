<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Namen‑Index – Epstein Files</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
<div class="topbar">
  <div class="container">
    <div class="row">
      <div class="badge"><span class="dot"></span><strong>Live</strong> · <span id="today"></span></div>
      <div class="badge">Status: <span id="authState">Gast</span> · <a href="#" id="logoutBtn" style="display:none">Logout</a></div>
    </div>
  </div>
</div>

<div class="masthead">
  <div class="container">
    <div class="inner">
      <div class="logo">
        EPSTEIN FILES
        <small>Index + Leseführung für öffentlich zugängliche Quellen · Premium: Highlights, Smart‑Match, Namen‑Index</small>
      </div>
      <div class="actions">
        <a class="btn" href="/admin.html">Admin</a>
        <a class="btn primary" href="#" data-subscribe>Freischalten <small>ab €1,99</small></a>
      </div>
    </div>
  </div>
</div>

<div class="nav">
  <div class="container">
    <div class="row">
      <a href="/">Start</a>
      <a href="/search.html">Suche</a>
      <a href="/names.html">Namen‑Index</a>
      <a href="/about.html">Methode</a>
      <a href="/partners.html">Partner</a>
    </div>
  </div>
</div>

<main class="container">
  <div class="grid" style="grid-template-columns:1fr .8fr;margin-top:16px">
    <div>
      <div class="card pad">
        <div class="kicker">Index</div>
        <div class="h2">Namen & Entitäten</div>
        <div class="p muted">Entsteht automatisch via AI‑Enrichment (oder manuell). Klick → zugehörige Dokumente.</div>
        <form id="searchForm" class="searchbar">
          <input id="q" type="search" placeholder="Filter…">
          <button type="submit">Filtern</button>
        </form>
      </div>

      <div class="card" style="margin-top:18px">
        <div class="pad" style="border-bottom:1px solid var(--line)">
          <div class="kicker">Liste</div>
          <div class="h2" id="status">—</div>
        </div>
        <div class="list" id="list"></div>
      </div>
    </div>
    <aside>
      <div class="card pad">
        <div class="kicker">Premium</div>
        <div class="p">Premium macht den Index nützlicher, weil Highlights Querverweise enthalten.</div>
        <a class="btn primary" href="#" data-subscribe>Freischalten ab €1,99</a>
      </div>
    </aside>
  </div>
</main>

<script type="module">
  import { apiGet, esc } from "/js/api.js";
  import { boot } from "/js/render.js";

  function qs(s){return document.querySelector(s)}
  function renderRow(r){
    return `
      <div class="item">
        <div class="title"><a href="/file/${encodeURIComponent(r.slug)}">${esc(r.name)}</a></div>
        <div class="meta"><span>${r.docs} Dokumente</span></div>
      </div>
    `;
  }

  async function load(q){
    const out = await apiGet(`/api/entities?limit=200&q=${encodeURIComponent(q||"")}`);
    if (!out.success) {
      qs("#status").textContent = "Fehler";
      return;
    }
    qs("#status").textContent = `${out.data.length} Entitäten`;
    qs("#list").innerHTML = out.data.map(renderRow).join("");
  }

  boot("names").then(async()=>{
    await load("");
    qs("#searchForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      await load(qs("#q").value.trim());
    });
  });
</script>

<div class="footer">
  <div class="container">
    <div class="row">
      <div>© <span id="year"></span> Wissens‑Bank. <span class="muted">Recherche‑Index & Leseführung.</span></div>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <a href="/impressum.html">Impressum</a>
        <a href="/datenschutz.html">Datenschutz</a>
        <a href="/agb.html">AGB</a>
      </div>
    </div>
    <div style="margin-top:10px" class="p small muted">
      Hinweis: Wir hosten keine urheberrechtlich geschützten Inhalte Dritter. Wir verlinken auf Quellen und erstellen Zusammenfassungen/Leseführung.
    </div>
  </div>
</div>
<script>document.getElementById("year").textContent = new Date().getFullYear();</script>


<!-- Deployed with Zip-Ship -->
<div id="zipship-badge" style="position:fixed;bottom:12px;right:12px;z-index:9999;font-family:system-ui,sans-serif;font-size:12px;">
  <a href="https://zip-ship-revolution.com/?utm_source=user_site" target="_blank" rel="noopener" 
     style="display:flex;align-items:center;gap:6px;padding:6px 12px;background:rgba(10,14,39,0.85);color:#00F0FF;text-decoration:none;border-radius:6px;border:1px solid rgba(0,240,255,0.3);backdrop-filter:blur(8px);transition:all 0.2s;">
    <span style="font-size:14px;">⚡</span>
    <span>Deployed with Zip-Ship</span>
  </a>
</div>
</body>
</html>
